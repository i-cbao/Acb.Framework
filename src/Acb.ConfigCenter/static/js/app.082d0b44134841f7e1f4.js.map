{"version":3,"sources":["webpack:///./src/views ^\\.\\/.*\\.vue$","webpack:///./src/App.vue?8e8c","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/utils/auth.js","webpack:///./src/services/fetch.js","webpack:///./src/services/index.js","webpack:///./src/utils/index.js","webpack:///src/views/Home.vue","webpack:///./src/views/Home.vue?967f","webpack:///./src/views/Home.vue"],"names":["map","./Home.vue","webpackContext","req","__webpack_require__","webpackContextResolve","id","Error","keys","Object","resolve","module","exports","selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","staticRenderFns","src_App","normalizeComponent","name","vue_esm","use","vue_router_esm","view","router","routes","path","component","default","config","productionTip","element_ui_common_default","a","el","components","App","template","_ticketName","getTicket","js_cookie_default","get","setTicket","ticket","set","expires","$axios","axios_default","create","baseURL","timeout","interceptors","request","headers","error","promise_default","reject","status","message","response","data","hasOwnProperty","ok","fetch","_url","key","env","Home","isLoading","dialogVisible","form","account","password","list","envs","modes","configMode","configEnv","configKey","editor","created","loadList","mounted","JSONEditor","document","getElementById","mode","search","height","computed","saveStatus","length","deleteStatus","methods","checkLogin","json","indexOf","_this","then","catch","loadConfig","_this2","expandAll","selectKey","envChange","modeChange","setMode","save","content","_this3","getText","str","typeof_default","JSON","parse","e","utils_isJson","$message","type","post","remove","_this4","$confirm","confirmButtonText","cancelButtonText","delete","handleLogin","_this5","location","reload","handleClose","views_Home","_vm","_v","loading","width","on","select","_l","item","index","_s","gutter","span","placeholder","model","value","callback","$$v","expression","change","label","disabled","click","title","visible","show-close","before-close","update:visible","$event","ref","label-width","nativeOn","keyup","_k","keyCode","$set","Component","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/app.082d0b44134841f7e1f4.js","sourcesContent":["var map = {\n\t\"./Home.vue\": \"j7e0\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"EtAD\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views ^\\.\\/.*\\.vue$\n// module id = EtAD\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1e386d4c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1e386d4c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","import Vue from 'vue'\nimport Router from 'vue-router'\nconst _view = view => require(`@/views/${view}.vue`).default\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [{\n    path: '/',\n    name: 'Home',\n    component: _view('Home')\n  }]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\n\nVue.config.productionTip = false\nVue.use(ElementUI);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: {\n    App\n  },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Cookies from 'js-cookie'\r\nconst _ticketName = '__acb_config_ticket'\r\n\r\n/**\r\n * 获取ticket\r\n */\r\nexport function getTicket() {\r\n  return Cookies.get(_ticketName)\r\n}\r\n\r\n/**\r\n * 设置ticket\r\n * @param {string} ticket 登录令牌\r\n */\r\nexport function setTicket(ticket) {\r\n  Cookies.set(_ticketName, ticket, {\r\n    expires: 7\r\n  })\r\n}\r\n\r\nexport default {\r\n  getTicket,\r\n  setTicket\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/auth.js","import axios from 'axios'\r\nimport {\r\n  getTicket\r\n} from '@/utils/auth'\r\n\r\n// 创建axios实例\r\nconst $axios = axios.create({\r\n  baseURL: process.env.GATEWAY, // api的base_url\r\n  timeout: 5 * 60 * 1000 // 请求超时时间\r\n})\r\n\r\n// request拦截器\r\n$axios.interceptors.request.use(\r\n  config => {\r\n    var ticket = getTicket()\r\n    if (ticket) {\r\n      config.headers['Authorization'] = `acb ${ticket}`\r\n    } else {\r\n      config.headers['Authorization'] = ' basic config'\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.reject({\r\n      status: -1,\r\n      message: error.message\r\n    })\r\n  }\r\n)\r\n\r\n// response拦截器\r\n$axios.interceptors.response.use(\r\n  response => {\r\n    var data = response.data\r\n    if (data.hasOwnProperty('ok') && !data.ok) {\r\n      return Promise.reject({\r\n        status: -1,\r\n        message: data.message\r\n      })\r\n    }\r\n    return data\r\n  },\r\n  error => {\r\n    return Promise.reject({\r\n      status: -1,\r\n      message: error.message\r\n    })\r\n  }\r\n)\r\nexport default $axios\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/fetch.js","import ajax from './fetch'\r\nimport {\r\n  setTicket\r\n} from '@/utils/auth'\r\n\r\nconst _url = (key, env) => {\r\n  if ('all' === env)\r\n    return key\r\n  return `${key}/${env}`\r\n}\r\n\r\nexport const list = () => ajax.get('list')\r\n\r\nexport const config = (key, env) => ajax.get(`${key}/${env}`)\r\n\r\nexport const save = (key, env, content) => ajax.post(_url(key, env), {\r\n  config: content\r\n})\r\n\r\nexport const remove = (key, env) => ajax.delete(_url(key, env))\r\n\r\nexport const login = (account, password) => {\r\n  return ajax.post('login', {\r\n    account,\r\n    password\r\n  }).then(json => {\r\n    setTicket(json.ticket)\r\n  })\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/index.js","/**\r\n * 时间转换\r\n */\r\nexport const toDate = time => {\r\n  if (!time)\r\n    return new Date()\r\n  try {\r\n    if (typeof time === 'number')\r\n      return new Date(time)\r\n    if (typeof time === 'string')\r\n      new Date(time.replace(/-/g, '/'))\r\n    return new Date(time)\r\n  } catch (e) {}\r\n  return time\r\n}\r\n\r\n/**\r\n * 添加天数\r\n * @param {*} time \r\n * @param {*} day \r\n */\r\nexport const dateAdd = (time, day) => {\r\n  var date = toDate(time)\r\n  if (date && day)\r\n    date.setDate(date.getDate() + day)\r\n  return date\r\n}\r\n\r\n/**\r\n * 是否是手机号码\r\n */\r\nexport const isMobile = mobile => {\r\n  return /^1[0-9]{10}$/gi.test(mobile)\r\n}\r\n\r\n/**\r\n * 是否是微信\r\n */\r\nexport function isWeixin() {\r\n  var ua = navigator.userAgent.toLowerCase()\r\n  return /micromessenger/i.test(ua)\r\n}\r\n\r\n/**\r\n * 是否是支付宝\r\n */\r\nexport function isAlipay() {\r\n  var ua = navigator.userAgent.toLowerCase()\r\n  return /alipay/i.test(ua)\r\n}\r\n\r\nexport const isJson = str => {\r\n  try {\r\n    if (typeof JSON.parse(str) == \"object\") {\r\n      return true;\r\n    }\r\n  } catch (e) {}\r\n  return false;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.js","<style lang=\"less\">\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n.el-header {\r\n  background-color: #409eff;\r\n  color: #333;\r\n  line-height: 60px;\r\n  text-align: center;\r\n  color: #fff;\r\n}\r\n.el-row {\r\n  margin-bottom: 20px;\r\n}\r\n.jsoneditor-poweredBy {\r\n  display: none;\r\n}\r\n#jsoneditor {\r\n  height: 500px;\r\n  width: 100%;\r\n}\r\n</style>\r\n\r\n<template>\r\n  <el-container>\r\n    <el-header>配置中心</el-header>\r\n    <el-container :loading=\"isLoading\">\r\n      <el-aside width=\"220px\">\r\n        <el-menu @select=\"selectKey\">\r\n          <el-menu-item v-for=\"item in list\" :key=\"item\" :index=\"item\">{{item}}</el-menu-item>\r\n        </el-menu>\r\n      </el-aside>\r\n      <el-main>\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\">\r\n            <el-input type=\"text\" placeholder=\"请输入配置项\" v-model=\"configKey\"></el-input>\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-select v-model=\"configEnv\" @change=\"envChange\" placeholder=\"请选择环境\">\r\n              <el-option v-for=\"env in envs\" :key=\"env\" :label=\"env\" :value=\"env\"></el-option>\r\n            </el-select>\r\n          </el-col>\r\n          <el-col :span=\"4\">\r\n            <el-select v-model=\"configMode\" @change=\"modeChange\" placeholder=\"请选择编辑模式\">\r\n              <el-option v-for=\"mode in modes\" :key=\"mode\" :label=\"mode\" :value=\"mode\"></el-option>\r\n            </el-select>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"16\">\r\n            <div id=\"jsoneditor\"></div>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-button type=\"primary\" @click=\"save\" :disabled=\"!saveStatus\">保存配置</el-button>\r\n          <el-button type=\"danger\" @click=\"remove\" :disabled=\"!saveStatus\">删除配置</el-button>\r\n        </el-row>\r\n      </el-main>\r\n      <el-dialog title=\"用户登录\" :visible.sync=\"dialogVisible\" width=\"400px\" :show-close=\"false\" :before-close=\"handleClose\">\r\n        <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\r\n          <el-form-item label=\"登录账号\">\r\n            <el-input v-model=\"form.account\" @keyup.enter.native=\"handleLogin\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"登录密码\">\r\n            <el-input type=\"password\" v-model=\"form.password\" @keyup.enter.native=\"handleLogin\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleLogin\">立即登录</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </el-container>\r\n  </el-container>\r\n</template>\r\n<script>\r\nimport { list, config, save, remove, login } from '@/services'\r\nimport { isJson } from '@/utils'\r\nexport default {\r\n  name: 'Home',\r\n  data() {\r\n    return {\r\n      isLoading: false,\r\n      dialogVisible: false,\r\n      form: {\r\n        account: '',\r\n        password: ''\r\n      },\r\n      list: [],\r\n      envs: ['all', 'dev', 'test', 'ready', 'prod'],\r\n      modes: ['text', 'code', 'tree', 'view', 'form'],\r\n      configMode: 'view',\r\n      configEnv: 'all',\r\n      configKey: '',\r\n      config: '',\r\n      editor: false\r\n    }\r\n  },\r\n  created() {\r\n    this.loadList()\r\n  },\r\n  mounted() {\r\n    this.editor = new JSONEditor(document.getElementById('jsoneditor'), {\r\n      mode: this.configMode,\r\n      search: true,\r\n      height: 500\r\n    })\r\n  },\r\n  computed: {\r\n    saveStatus() {\r\n      return this.configKey && this.configKey.length > 3\r\n    },\r\n    deleteStatus() {\r\n      return this.configKey && this.configKey.length > 3\r\n    }\r\n  },\r\n  methods: {\r\n    checkLogin(json) {\r\n      if (json.message.indexOf('403') >= 0) this.dialogVisible = true\r\n    },\r\n    loadList() {\r\n      list()\r\n        .then(json => {\r\n          this.list = json\r\n        })\r\n        .catch(this.checkLogin)\r\n    },\r\n    loadConfig() {\r\n      config(this.configKey, this.configEnv)\r\n        .then(json => {\r\n          this.editor.set(json || {})\r\n          if (\r\n            this.configMode === 'tree' ||\r\n            this.configMode === 'view' ||\r\n            this.configMode === 'form'\r\n          )\r\n            this.editor.expandAll()\r\n        })\r\n        .catch(this.checkLogin)\r\n    },\r\n    selectKey(key) {\r\n      this.configKey = key\r\n      this.loadConfig()\r\n    },\r\n    envChange(env) {\r\n      this.loadConfig()\r\n    },\r\n    modeChange() {\r\n      this.editor.setMode(this.configMode)\r\n    },\r\n    save() {\r\n      this.config = this.editor.getText()\r\n      if (!isJson(this.config)) {\r\n        this.$message({\r\n          message: '配置信息必须为Json格式',\r\n          type: 'warning'\r\n        })\r\n        return false\r\n      }\r\n      this.isLoading = true\r\n      save(this.configKey, this.configEnv, this.config)\r\n        .then(json => {\r\n          if (json && json.ok) {\r\n            this.$message({\r\n              message: '配置文件保存成功',\r\n              type: 'success'\r\n            })\r\n            this.loadList()\r\n            this.isLoading = false\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.isLoading = false\r\n        })\r\n    },\r\n    remove() {\r\n      this.$confirm('此操作将删除该配置文件, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        remove(this.configKey, this.configEnv).then(json => {\r\n          if (json && json.ok) {\r\n            this.$message({\r\n              message: '配置文件删除成功',\r\n              type: 'success'\r\n            })\r\n            this.loadList()\r\n            this.loadConfig()\r\n          }\r\n        })\r\n      })\r\n    },\r\n    handleLogin() {\r\n      if (!this.form.account || !this.form.password) {\r\n        this.$message({\r\n          message: '请输入账号密码',\r\n          type: 'error'\r\n        })\r\n        return false\r\n      }\r\n      login(this.form.account, this.form.password)\r\n        .then(json => {\r\n          location.reload(true)\r\n        })\r\n        .catch(json => {\r\n          this.$message({\r\n            message: json.message,\r\n            type: 'error'\r\n          })\r\n        })\r\n    },\r\n    handleClose() {\r\n      return false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-header',[_vm._v(\"配置中心\")]),_vm._v(\" \"),_c('el-container',{attrs:{\"loading\":_vm.isLoading}},[_c('el-aside',{attrs:{\"width\":\"220px\"}},[_c('el-menu',{on:{\"select\":_vm.selectKey}},_vm._l((_vm.list),function(item){return _c('el-menu-item',{key:item,attrs:{\"index\":item}},[_vm._v(_vm._s(item))])}))],1),_vm._v(\" \"),_c('el-main',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-input',{attrs:{\"type\":\"text\",\"placeholder\":\"请输入配置项\"},model:{value:(_vm.configKey),callback:function ($$v) {_vm.configKey=$$v},expression:\"configKey\"}})],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"placeholder\":\"请选择环境\"},on:{\"change\":_vm.envChange},model:{value:(_vm.configEnv),callback:function ($$v) {_vm.configEnv=$$v},expression:\"configEnv\"}},_vm._l((_vm.envs),function(env){return _c('el-option',{key:env,attrs:{\"label\":env,\"value\":env}})}))],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-select',{attrs:{\"placeholder\":\"请选择编辑模式\"},on:{\"change\":_vm.modeChange},model:{value:(_vm.configMode),callback:function ($$v) {_vm.configMode=$$v},expression:\"configMode\"}},_vm._l((_vm.modes),function(mode){return _c('el-option',{key:mode,attrs:{\"label\":mode,\"value\":mode}})}))],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":16}},[_c('div',{attrs:{\"id\":\"jsoneditor\"}})])],1),_vm._v(\" \"),_c('el-row',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.saveStatus},on:{\"click\":_vm.save}},[_vm._v(\"保存配置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"disabled\":!_vm.saveStatus},on:{\"click\":_vm.remove}},[_vm._v(\"删除配置\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"用户登录\",\"visible\":_vm.dialogVisible,\"width\":\"400px\",\"show-close\":false,\"before-close\":_vm.handleClose},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"登录账号\"}},[_c('el-input',{nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.form.account),callback:function ($$v) {_vm.$set(_vm.form, \"account\", $$v)},expression:\"form.account\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"登录密码\"}},[_c('el-input',{attrs:{\"type\":\"password\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\"立即登录\")])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-512dca8a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-512dca8a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-512dca8a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Home.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}