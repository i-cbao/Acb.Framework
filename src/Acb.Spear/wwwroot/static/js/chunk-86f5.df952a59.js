(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-86f5"],{"1LYc":function(e,n,t){},"4BhZ":function(e,n,t){"use strict";var o=t("f97M");t.n(o).a},"60Md":function(e,n,t){"use strict";t.r(n);var o=t("EJiy"),i=t.n(o),c=t("t3Un"),s=(t("X4fA"),function(e,n){return"default"===n?"api/config/"+e:"api/config/"+e+"/"+n}),a=t("3PWe"),l=t.n(a),r=(t("YBQ+"),{name:"Config",data:function(){return{envs:["default","dev","test","ready","prod"],modes:["text","code","tree","view","form"],configMode:"view",configEnv:"default",list:[],configKey:"",config:"",editor:!1}},computed:{saveStatus:function(){return this.configKey&&this.configKey.length>1},deleteStatus:function(){return this.configKey&&this.configKey.length>1}},created:function(){this.loadList()},mounted:function(){this.editor=new l.a(document.getElementById("jsoneditor"),{mode:this.configMode,search:!0,height:500})},methods:{loadList:function(){var e=this;c.a.get("api/config/list").then(function(n){e.list=n})},loadConfig:function(){var e=this;(function(e,n){return c.a.get("api/config/"+e+"/"+n)})(this.configKey,this.configEnv).then(function(n){e.editor.set(n||{}),"tree"!==e.configMode&&"view"!==e.configMode&&"form"!==e.configMode||e.editor.expandAll()})},selectKey:function(e){this.configKey=e,this.loadConfig()},envChange:function(e){this.loadConfig()},modeChange:function(){this.editor.setMode(this.configMode)},save:function(){var e,n=this;this.config=this.editor.getText()||"{}";try{e=JSON.parse(this.config)}catch(e){console.log(e)}if("object"!==(void 0===e?"undefined":i()(e)))return this.$message({message:"配置信息必须为Json格式",type:"warning"}),!1;this.isLoading=!0,function(e,n,t){return c.a.post(s(e,n),t)}(this.configKey,this.configEnv,e).then(function(e){n.$message({message:"配置文件保存成功",type:"success"}),n.loadList(),n.isLoading=!1})},remove:function(){var e=this;this.$confirm("此操作将删除该配置文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(e,n){return c.a.delete(s(e,n))})(e.configKey,e.configEnv).then(function(n){e.$message({message:"配置文件删除成功",type:"success"}),e.loadList(),e.loadConfig()})})}}}),f=(t("4BhZ"),t("Cgum"),t("KHd+")),u=Object(f.a)(r,function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("el-container",{staticStyle:{padding:"20px"}},[t("el-main",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:4}},[t("el-select",{attrs:{filterable:"","allow-create":"",placeholder:"请输入配置项"},on:{change:e.envChange},model:{value:e.configKey,callback:function(n){e.configKey=n},expression:"configKey"}},e._l(e.list,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),t("el-col",{attrs:{span:4}},[t("el-select",{attrs:{placeholder:"请选择环境"},on:{change:e.envChange},model:{value:e.configEnv,callback:function(n){e.configEnv=n},expression:"configEnv"}},e._l(e.envs,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),t("el-col",{attrs:{span:4}},[t("el-select",{attrs:{placeholder:"请选择编辑模式"},on:{change:e.modeChange},model:{value:e.configMode,callback:function(n){e.configMode=n},expression:"configMode"}},e._l(e.modes,function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})}))],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:16}},[t("div",{attrs:{id:"jsoneditor"}})])],1),e._v(" "),t("el-row",[t("el-button",{attrs:{disabled:!e.saveStatus,type:"primary"},on:{click:e.save}},[e._v("保存配置")]),e._v(" "),t("el-button",{attrs:{disabled:!e.saveStatus,type:"danger"},on:{click:e.remove}},[e._v("删除配置")])],1)],1)],1)},[],!1,null,"9847790e",null);u.options.__file="index.vue";n.default=u.exports},Cgum:function(e,n,t){"use strict";var o=t("1LYc");t.n(o).a},f97M:function(e,n,t){}}]);